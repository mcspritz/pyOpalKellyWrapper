#, Opal Kelly Interface Register Bank Config File,,,,,,,,,,
#, Please note this config file cannot have blank lines.,,,,,,,,,,
#,,,,,,,,,,,
#,Project:,TACIMAGER_AA,,,Read Me:,,,,,,
#, Author:,Luca Parmesan,,,Lines that do not contribute to the register bank config have a '#' in column A.,,,,,,
#, Date:,04/09/2014,,,Save this file as a CSV 'filename.csv',,,,,,
#,Version:,PCB1919A V1,,,Run command 'tclsh OKConfig.tcl filename.csv',,,,,,
#, ,,,,,,,,,,
#,,,,,,,,,,,
#, Direction       ,Type ,Address,Name,Size,Class,LimitMin,LimitMax,Destination,Starting Bit,Ref Source
#, (FromPC / ToPC) ,(Wire/Trigger/Pipe),(8b Hex),(Must be unique and cannot be same as DESTINATION column),(Max 32),(DAC/FSM/ADC/CUSTOM),,,(PARENT/DACX_X/LOCAL),,"(Clock For Trigger, SPAD address for Counter)"
#, Opal Kelly PCB I/O,,,,,,,,,,
,FromPC,Wire,00,OK_LEDs,8,OK,NA,NA,PARENT,0,
#,,,,,,,,,,,
#, PCB 1914B / 1919A DACs,,,,,,,,,,
#,,,,,,,,,,,
#,VHV - HV_DAC VA:,,,,,,,,,,
,FromPC,Wire,01,VHV,12,DAC,0,2500,VHV_DATA,0,
#,ToPC,Wire,21,VHV_check,12,DAC,0,0,VHV_ret,0,
#,,,,,,,,,,,
#,VHV2 - HV DAC VB:,,,,,,,,,,
,FromPC,Wire,01,VHV2,12,DAC,0,2500,VHV2_DATA,12,
#,ToPC,Wire,21,VHV2_check,12,DAC,0,0,VHV2_ret,12,
#,,,,,,,,,,,
#,DAC1_A / DAC1,,,,,,,,,,
,FromPC,Wire,02,VRAMP,12,DAC,0,3300,DAC1_A_DATA,0,
#,,,,,,,,,,,
#,DAC1_B / DAC2,,,,,,,,,,
,FromPC,Wire,02,VNEG1V0,12,DAC,0,3650,DAC1_B_DATA,12,
#,,,,,,,,,,,
#,DAC2_A / DAC3,,,,,,,,,,
,FromPC,Wire,03,VQ,12,DAC,0,3300,DAC2_A_DATA,0,
#,,,,,,,,,,,
#,DAC2_B / DAC4,,,,,,,,,,
,FromPC,Wire,03,VREF1,12,DAC,0,3300,DAC2_B_DATA,12,
#,,,,,,,,,,,
#,V1_SET / V1_SET,,,,,,,,,,
,FromPC,Wire,04,V3V3,12,DAC,0,3650,V1_SET_DATA,0,
#,,,,,,,,,,,
#,V2_SET / V2_SET,,,,,,,,,,
,FromPC,Wire,04,V2V7,12,DAC,0,3650,V2_SET_DATA,12,
#,,,,,,,,,,,
#,V3_SET / IBIAS1_IN,,,,,,,,,,
,FromPC,Wire,05,ICOL,12,DAC,0,3300,V3_SET_DATA,0,
#,,,,,,,,,,,
#,DAC4_B / IBIAS2_IN,,,,,,,,,,
,FromPC,Wire,05,IOPAMP,12,DAC,0,3300,DAC4_B_DATA,12,
#,,,,,,,,,,,
#,VEB_SET / V3_SET,,,,,,,,,,
,FromPC,Wire,06,V3V6,12,DAC,0,3650,VEB_SET_DATA,0,
#,,,,,,,,,,,
#,VDDRAMP_SET / V4_SET,,,,,,,,,,
,FromPC,Wire,06,VDDOPAMP,12,DAC,0,3650,VDD_RAMP_SET_DATA,12,
#,,,,,,,,,,,
#,VDDE_SET / VDDE_SET,,,,,,,,,,
,FromPC,Wire,07,VDDE,12,DAC,0,3300,VDDE_SET_DATA,0,
#,,,,,,,,,,,
#,AVDD_SET / V5_SET,,,,,,,,,,
,FromPC,Wire,07,V1V0,12,DAC,0,3300,AVDD_SET_DATA,12,
#,,,,,,,,,,,
#,3V3_SET / V6_SET,,,,,,,,,,
,FromPC,Wire,08,ADCPWR,12,DAC,0,3300,V3V3_SET_DATA,0,
#,,,,,,,,,,,
#,1V2_SET / 1V2_SET,,,,,,,,,,
,FromPC,Wire,08,V1V2,12,DAC,0,1250,V1V2_SET_DATA,12,
#,,,,,,,,,,,
#,3V6_SET / DAC5,,,,,,,,,,
,FromPC,Wire,09,VREF2,12,DAC,0,3300,V3V6_SET_DATA,0,
#,,,,,,,,,,,
#,DAC_SPARE / DAC6,,,,,,,,,,
,FromPC,Wire,09,PIXELREF,12,DAC,0,3300,DAC_SPARE_DATA,12,
#,,,,,,,,,,,
#, Programme and Reset DACs,,,,,,,,,,
,FromPC,Trigger,40,ProgDAC,1,DAC,0,2,ProgResetDAC,0,clk_1M
,FromPC,Trigger,40,ResetDAC,1,DAC,0,2,ProgResetDAC,1,clk_1M
#,ToPC,Wire,20,ProgResetDAC_Ret,2,DAC,0,2,ProgResetDAC_Ret,2,
#,,,,,,,,,,,
#,,,,,,,,,,,
#,PCB1914 ADCs,,,,,,,,,,
#,,,,,,,,,,,
,ToPC,Wire,20,ADC_PU,1,ADC,0,1,PARENT,4,
#,,,,,,,,,,,
#,Project State Machine,,,,,,,,,,
#,,,,,,,,,,,
,FromPC,Wire,00,Mode,8,FSM,0,255,PARENT,8,
,ToPC,Wire,20,FSMState,8,FSM,0,255,PARENT,5,
#,,,,,,,,,,,
#,SPCIMAGER,,,,,,,,,,
#,,,,,,,,,,,
,FromPC,Wire,00,SPCIMAGER_AA_TRUE_FALSE,1,CUSTOM,0,1,PARENT,15,
,FromPC,Wire,00,DIGITAL_TOF_AMBIENT_REJECTION_ENABLE,1,CUSTOM,0,1,PARENT,14,
,FromPC,Wire,00,SPADOUT_ENABLE,1,CUSTOM,0,1,PARENT,13,
,FromPC,Wire,00,PIXELRESETOUT_ENABLE,1,CUSTOM,0,1,PARENT,12,
,FromPC,Wire,00,MEMPUSHOUT_ENABLE,1,CUSTOM,0,1,PARENT,11,
,FromPC,Wire,13,SPI_BINA_DELAYGEN_POS1,7,CUSTOM,0,127,PARENT,0,
,FromPC,Wire,13,SPI_BINA_DELAYGEN_POS2,7,CUSTOM,0,127,PARENT,7,
,FromPC,Wire,13,SPI_BINA_DELAYGEN_LT_SEL,1,CUSTOM,0,1,PARENT,14,
,FromPC,Wire,13,SPI_BINA_DELAYGEN_OFFSET_SEL,1,CUSTOM,0,1,PARENT,15,
,FromPC,Wire,14,SPI_BINA_DELAYGEN_DAC,4,CUSTOM,0,15,PARENT,0,
,FromPC,Wire,14,SPI_BINB_DELAYGEN_DAC,4,CUSTOM,0,15,PARENT,4,
,FromPC,Wire,14,SPI_BINA_OUT_ENABLE,1,CUSTOM,0,1,PARENT,8,
,FromPC,Wire,14,SPI_BINB_OUT_ENABLE,1,CUSTOM,0,1,PARENT,9,
,FromPC,Wire,14,SPI_BINA_INPUTSEL,1,CUSTOM,0,1,PARENT,10,
,FromPC,Wire,14,SPI_BINB_INPUTSEL,1,CUSTOM,0,1,PARENT,11,
,FromPC,Wire,14,CHIP_RESET,1,CUSTOM,0,1,PARENT,12,
,FromPC,Wire,14,CDSBLK_DISABLE,1,CUSTOM,0,1,PARENT,13,
,FromPC,Wire,14,CDSSIG_DISABLE,1,CUSTOM,0,1,PARENT,14,
,FromPC,Wire,14,CDS_CROWBAR_DISABLE,1,CUSTOM,0,1,PARENT,15,
,FromPC,Wire,15,SPI_BINB_DELAYGEN_POS1,7,CUSTOM,0,127,PARENT,0,
,FromPC,Wire,15,SPI_BINB_DELAYGEN_POS2,7,CUSTOM,0,127,PARENT,7,
,FromPC,Wire,15,SPI_BINB_DELAYGEN_LT_SEL,1,CUSTOM,0,1,PARENT,14,
,FromPC,Wire,15,SPI_BINB_DELAYGEN_OFFSET_SEL,1,CUSTOM,0,1,PARENT,15,
,FromPC,Wire,16,ROI_FIRST_ROW,8,CUSTOM,0,255,PARENT,0,
,FromPC,Wire,16,ROI_LAST_ROW,8,CUSTOM,0,255,PARENT,8,
,FromPC,Wire,17,ROI_FIRST_COL,9,CUSTOM,0,319,PARENT,0,
,FromPC,Wire,17,EXPOSURE_MODE,5,CUSTOM,0,65535,PARENT,10,
,FromPC,Wire,18,ROI_LAST_COL,9,CUSTOM,0,319,PARENT,0,
,FromPC,Wire,18,DEBUG_FORCE_GLOBAL_RESET_FOR_ANA_EXPOSURE,1,CUSTOM,0,1,PARENT,11,
,FromPC,Wire,18,DIGITAL_READOUT_PIXEL_BIT,1,CUSTOM,0,1,PARENT,10,
,FromPC,Wire,19,NO_OF_EXPOSURES,16,CUSTOM,0,65535,PARENT,0,
,FromPC,Wire,1A,EXPOSURE_TIME_LSB,16,CUSTOM,0,65535,PARENT,0,
,FromPC,Wire,1B,EXPOSURE_TIME_MSB,16,CUSTOM,0,65535,PARENT,0,
,FromPC,Wire,1C,ROLLING_RESET_CYCLES,8,CUSTOM,0,255,PARENT,0,
#,FromPC,Wire,1C,SPARE,8,CUSTOM,0,255,PARENT,8,
,FromPC,Wire,1D,GLOBAL_RESET_CYCLES,16,CUSTOM,0,65535,PARENT,0,
,FromPC,Wire,1E,COLUMN_CYCLES_CROWBAR,8,CUSTOM,0,255,PARENT,0,
,FromPC,Wire,1E,ADC_SIGNALS_START,8,CUSTOM,0,255,PARENT,8,
,FromPC,Wire,1F,ADC_CROWBAR_SAMPLE_START,8,CUSTOM,0,255,PARENT,0,
,FromPC,Wire,1F,CDS_BLK_AND_SIG_CYCLES,8,CUSTOM,0,255,PARENT,8,
,ToPC,Wire,22,FIFO_WR_COUNT,16,CUSTOM,0,65535,PARENT,0,
,ToPC,Wire,23,FIFO_WR_LIMIT,16,CUSTOM,0,65535,PARENT,0,
,ToPC,Wire,24,EXPOSURE_TIME_LSB_RET,16,CUSTOM,0,65535,PARENT,0,
,ToPC,Wire,25,EXPOSURE_TIME_MSB_RET,16,CUSTOM,0,65535,PARENT,0,
,ToPC,Wire,3F,FIRMWARE_REVISION,16,CUSTOM,0,65535,PARENT,0,
,FromPC,Trigger,41,RST_CTRL_SR,1,CUSTOM,0,1,PARENT,0,SYS_CLK2
,FromPC,Trigger,42,PROG_CTRL_SR,1,CUSTOM,0,1,PARENT,0,SYS_CLK2
,FromPC,Trigger,43,ADC_FIFO_RST,1,CUSTOM,0,1,PARENT,0,SYS_CLK2
,FromPC,Trigger,44,EXPOSURE_START_TRIGGER,1,CUSTOM,0,1,PARENT,0,SYS_CLK2
,FromPC,Trigger,45,DEBUG_PULSERESET,1,CUSTOM,0,1,PARENT,0,SYS_CLK2
,ToPC,Trigger,60,PROG_COMPLETE,1,CUSTOM,0,1,PARENT,0,SYS_CLK2
,ToPC,BTPipe,A2,ADC_FIFO_OUT,16,CUSTOM,0,65535,PARENT,0,
#,,,,,,,,,,,
#, Do NOT leave blank lines at the end of this configuration script,,,,,,,,,,
#,,,,,,,,,,,
